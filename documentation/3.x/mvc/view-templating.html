<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="shortcut icon" href="../../../asset/images/favicon.ico" />

    <title>View and Templating | Windwalker - PHP Rapid Development Framework</title>

    <meta name="description" content="">
    <meta name="generator" content="The Time Machine">

    <meta property="og:title" content="View and Templating | Windwalker - PHP Rapid Development Framework">
    <meta property="og:site_name" content="Windwalker Framework">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-material-design/0.5.10/css/bootstrap-material-design.min.css" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400,500,700,900,300|Roboto+Condensed:400,700|Roboto+Slab:400,700,300" />
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" />
    <link rel="stylesheet" href="../../../asset/css/ripples.min.css" />
    <link rel="stylesheet" href="../../../asset/css/prism.min.css" />
    <link rel="stylesheet" href="../../../asset/css/main.css" />
        </head>
<body class="">

    <section id="header">

            <nav id="nav">

    <div class="navbar navbar-transparent">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-responsive-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="../../../">
                    <img class="img-invert" src="../../../asset/images/logo/windwalker-logo-150.png" alt="Logo" style="max-height: 100%">
                </a>
            </div>
            <div class="navbar-collapse collapse navbar-responsive-collapse">
                <ul class="mainmenu nav navbar-nav navbar-right">
                    <li class="">
                        <a href="../../../about/">
                            <i class="material-icons">change_history</i>
                            <span class="menu-item-title">About</span>
                        </a>
                    </li>

                    <li class="active">
                        <a href="../../../documentation/3.x/start/installation.html">
                            <i class="material-icons">description</i>
                            <span class="menu-item-title">Documentation</span>
                        </a>
                    </li>

                    <li class="">
                        <a href="../../../rad/start/introduction.html">
                            <i class="material-icons">graphic_eq</i>
                            <span class="menu-item-title">RAD</span>
                        </a>
                    </li>

                    <li class="">
                        <a href="https://github.com/ventoviro/windwalker" target="_blank">
                            <i class="fa fa-fw fa-github"></i>
                            <span class="menu-item-title">GitHub</span>
                        </a>
                    </li>

                    <li>
                                    <div class="btn-group" style="margin-left: 15px">
                <button type="button" class="btn btn-default btn-raised dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    3.x <i class="fa fa-caret-down"></i>
                </button>
                <ul class="dropdown-menu">
                    <li class="active">
                        <a href="../../../documentation/3.x/mvc/view-templating.html">3.x</a>
                    </li>

                    <li class="">
                        <a href="../../../documentation/3.0-3.3/mvc/view-templating.html">3.0-3.3</a>
                    </li>

                    <li class="">
                        <a href="../../../documentation/2.1/mvc/view-templating.html">2.1</a>
                    </li>
                </ul>
            </div>
                            </li>
                </ul>
            </div>
        </div>
    </div>

</nav>

        <section id="banner" class="container text-center">
            <div class="row">
                <div class="banner-content col-md-10">
                    <h1 class="banner-title">View and Templating</h1>
                </div>
            </div>
        </section>

    </section>

<div id="main-body" class="main main-raised main-raised-bottom">
        <section id="main-body" class="container main-block">
        <div class="row">
            <div class="col-md-3">
                    <div class="uk-width-medium-1-4 uk-container-center">
        <ul class="nav nav-stacked side-menu side-bar">
    
                
        <li class="nav-header">
        <h3 class="slab-font">Start</h3>
    </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/start/installation.html">Installation</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/start/getting-started.html">Getting Started</a>
            </li>
        
           <li class="nav-header">
        <h3 class="slab-font">Core</h3>
    </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/core/routing.html">Routing</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/core/package-system.html">Packages</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/core/config.html">Config &amp; Setting</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/core/request-input.html">Request and Input</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/core/psr7-middlewares.html">Psr7 and Middlewares</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/core/ioc-container.html">IoC Container</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/core/service-provider.html">Service Provider</a>
            </li>
        
           <li class="nav-header">
        <h3 class="slab-font">MVC</h3>
    </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/mvc/use-controller.html">Use Controller</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/mvc/class-resolvers.html">Class Resolvers</a>
            </li>
                    <li class="active">
                <a class="withripple" href="../../../documentation/3.x/mvc/view-templating.html">View and Templating</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/mvc/edge.html">Edge Templates</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/mvc/database-repository.html">Database and Repository</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/mvc/view-model.html">ViewModel</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/mvc/uri-route-building.html">URI and Route Building</a>
            </li>
        
           <li class="nav-header">
        <h3 class="slab-font">Database</h3>
    </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/db/basic.html">Basic Usage</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/db/read-write.html">Read and Write</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/db/table-schema.html">Table and Schema</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/db/query-builder.html">Query Builder</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/db/active-record.html">ActiveRecord</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/db/datamapper.html">DataMapper</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/db/migration.html">Migration And Seeding</a>
            </li>
        
           <li class="nav-header">
        <h3 class="slab-font">Services</h3>
    </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/services/authentication.html">Authentication</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/services/authorisation.html">Authorisation</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/services/asset.html">Asset Manager</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/services/caching.html">Caching</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/services/datetime.html">Chronos (DateTime)</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/services/environment.html">Environment</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/services/events.html">Events</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/services/queue.html">Queue</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/services/languages.html">Languages</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/services/mailer.html">Mailer</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/services/session.html">Session</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/services/widget-renderer.html">Widget and Renderer</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/services/debugging.html">Debugging and Logging</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/services/error-handling.html">Error Handling</a>
            </li>
        
           <li class="nav-header">
        <h3 class="slab-font">Console</h3>
    </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/console/console-basic.html">Basic Usage</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/console/custom-commands.html">Custom Commands</a>
            </li>
        
           <li class="nav-header">
        <h3 class="slab-font">More</h3>
    </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/more/data-object.html">Data Object</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/more/http-stream.html">Http and Stream</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/more/cors.html">CORS Headers</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/more/structure.html">Structure Object</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/more/crypt.html">Crypt</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/more/form-builder.html">Form Builder</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/more/form-definition.html">Form Definition</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/more/filesystem.html">Filesystem</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/more/html-builder.html">HTML Builder</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/more/pagination.html">Pagination</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/more/string.html">String</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/more/tests.html">Tests</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/more/validation.html">Validation</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/more/utilities.html">Utilities</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/more/more-packages.html">More Packages</a>
            </li>
        
       </ul>
    </div>
            </div>

            <div class="col-md-9">
                <article class="article-content">
                    <h2>Use View Object</h2>
<p>In controller, you can do anything you want, but if you hope to render some template, the View object will help you.
In this case, we create a default <code>HtmlView</code> to render template:</p>
<pre><code class="language-php">// /src/Flower/Controller/Sakuras/GetController.php

class GetController extends Controller
{
    protected function doExecute()
    {
        $view = new HtmlView();

        return $view-&gt;render();
    }
}</code></pre>
<p>Then create a php file in <code>/templates/default.php</code>. This template will be rendered.</p>
<pre><code class="language-php">&lt;?php
// templates/default.php
?&gt;
Hello World</code></pre>
<h3>Push Controller Information into View</h3>
<p>But this is not a good position to locate template, we will hope it at <code>templates/flower/sakuras</code>.
So add this code to push controller config into View, View will know every thing about Controller:</p>
<pre><code class="language-php">// /src/Flower/Controller/Sakuras/GetController.php

$view = new HtmlView();

// Push config into View
$view-&gt;setConfig($this-&gt;config);

return $view-&gt;render();</code></pre>
<p>Move template file to <code>/templates/flower/sakuras/default.php</code>, and Windwalker will found it.</p>
<h3>Use Package Templates</h3>
<p>If your View is in a package, you can put your template at <code>{Package}/Templates/{view}</code>, For example, we move <code>default.php</code>
to <code>/src/Flower/Templates/sakuras</code>, View will find this position priority than root templates folder.
So we can make our templates following package folders.</p>
<h3>The Ordering of Template Paths</h3>
<p>Windwalker will follow this orders to find templates, you can override any template in a higher priority position:</p>
<pre><code>[0] =&gt; {ROOT}/src/{package}/Templates/{view}/{locale}
[1] =&gt; {ROOT}/src/{package}/Templates/{view}
[2] =&gt; {ROOT}/src/{package}/Templates
[3] =&gt; {ROOT}/templates/{package}/{view}
[4] =&gt; {ROOT}/templates/{package}
[5] =&gt; {ROOT}/templates
[6] =&gt; {ROOT}/vendor/windwalker/core/src/Core/Resources/Templates</code></pre>
<h3>Multilingual Paths</h3>
<p>If you set locale in config <code>language.locale</code>, the current and default locale will auto added into paths with high priority:</p>
<pre><code>[0] =&gt; /src/{package}/Templates/{view}/zh-TW  &lt;--- current locale
[1] =&gt; /src/{package}/Templates/{view}/en-GB  &lt;--- default locale
[2] =&gt; /src/{package}/Templates/{view}
[3] =&gt; /src/{package}/Templates
[4] =&gt; /templates/{package}/{view}
[5] =&gt; /templates/{package}
[6] =&gt; /templates
[7] =&gt; /vendor/windwalker/core/src/Core/Resources/Templates</code></pre>
<h3>Use other layouts</h3>
<p>The <code>foo.bar.baz</code> will matched <code>foo/bar/baz.php</code> file. If you didn't set any layout name, <code>default</code> will instead.</p>
<pre><code class="language-php">// Will find: edit.php
$view-&gt;setLayout('edit')-&gt;render();

// Will find: foo/bar/baz.php
$view-&gt;setLayout('foo.bar.baz')-&gt;render();</code></pre>
<h3>Custom Template Paths</h3>
<p>Windwalker View use <code>SplPriorityQueue</code> to sort paths, if we want to add path, we should provide the priority flag.</p>
<pre><code class="language-php">use Windwalker\Utilities\Queue\Priority;

// ...

$view-&gt;addPath('/my/template/path1', Priority::HIGH);
$view-&gt;addPath('/my/template/path2', Priority::NORMAL);</code></pre>
<h3>Add Global Paths</h3>
<p>Add paths to global that we don't need to set it every time, you must run this code before controller executed,
for example, you can run in <code>onAfterInitialise</code> event (See <a href="../more/event.html">Event</a>) , <code>YourPackage::initialise()</code> or <code>Application::initialise()</code>:</p>
<pre><code class="language-php">// Add global paths
\Windwalker\Core\Renderer\RendererHelper::addGlobalPath('/my/path', Priority::ABOVE_NORMAL);</code></pre>
<p>See also: <a href="https://github.com/ventoviro/windwalker/tree/staging/src/View#htmlview">Windwalker View</a>
/ <a href="http://php.net/manual/en/class.splpriorityqueue.php">SplPriorityQueue</a></p>
<h3>Add Data</h3>
<p>View can maintain some data and use it in template:</p>
<pre><code class="language-php">// Set it when construct
$view = new PhpHtmlView(array('foo' =&gt; 'bar'));

// Use setter
$view-&gt;set('foo', 'bar');

// Use Array Access
$view['foo'] = 'bar';</code></pre>
<p>Then we can get this variables in template:</p>
<pre><code class="language-php">&lt;?php
// templates/flower/sakuras/default.php

?&gt;
Hello &lt;?php echo $foo;?&gt;</code></pre>
<h2>Create View Classes</h2>
<p>We are still using default View, but it is not so customizable. Let's extend it to a new View object:</p>
<pre><code class="language-php">&lt;?php
// src/Flower/View/SakurasHtmlView.php

namespace Flower\View;

use Windwalker\Core\View\HtmlView;

class SakurasHtmlView extends HtmlView
{
    protected function prepareData($data)
    {
        $data-&gt;created = $data-&gt;created-&gt;format('Y-m-d');
    }
}</code></pre>
<p>Always remember add <code>Html</code> in view name, sometimes we will need <code>JsonView</code> or <code>XmlView</code>.
Now we can create this view in controller:</p>
<pre><code class="language-php">&lt;?php
// /src/Flower/Controller/Sakuras/GetController.php

namespace Flower\Controller\Sakuras;

use Flower\View\SakurasHtmlView;
use Windwalker\Core\Controller\Controller;

class GetController extends Controller
{
    protected function doExecute()
    {
        $view = $this-&gt;getView('Sakuras');

        $view['created'] = new \DateTime('now');

        return $view-&gt;setLayout('sakuras')-&gt;render();
    }
}</code></pre>
<p>The purpose of custom View object is that we can set data format in it, so controller dose not need to worry about
how to show data with formatted, just consider how to send data into View and redirect pages.</p>
<h2>PHP Engine</h2>
<p>PHP engine use <a href="https://github.com/ventoviro/windwalker-renderer">Windwalker Renderer</a> to render page,
this package provides a simple interface similar to Twig that support template extending.</p>
<h3>Include Sub Template</h3>
<p>Use <code>load()</code> to load other template file as a block. The first argument is file path, the second argument is new data
to merge with original data.</p>
<pre><code class="language-php">echo $this-&gt;load('sub.template', array('bar' =&gt; 'baz'));</code></pre>
<p>Example to load <code>foo/article.php</code>:</p>
<pre><code class="language-html">&lt;?php
// foo/article.php
?&gt;
&lt;h1&gt;&lt;?php echo $this-&gt;escape($title); ?&gt;&lt;/h1&gt;

&lt;?php foreach ($data-&gt;articles as $article): ?&gt;
    &lt;?php echo $this-&gt;load('foo.article', array('bar' =&gt; 'baz')); ?&gt;
&lt;?php endforeach; ?&gt;</code></pre>
<h3>Extends Parent Template</h3>
<p>In Windwalker Renderer, there is a powerful function like Twig or Blade, we provide <code>extend()</code> method to extends
parent template. (<code>extends</code> in php is a reserved string, so we can only use <code>extend</code>)</p>
<p>For example, this is the parent <code>_global/html.php</code> template:</p>
<pre><code class="language-html">&lt;!-- _global/html.php --&gt;
&lt;Doctype html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;&lt;?php $this-&gt;block('title');?&gt;Home&lt;?php $this-&gt;endblock(); ?&gt;&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="container"&gt;
    &lt;?php $this-&gt;block('body');?&gt;
        &lt;h2&gt;Home page&lt;/h2&gt;
    &lt;?php $this-&gt;endblock(); ?&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
<p>And we can extends it in our View:</p>
<pre><code class="language-html">&lt;?php
// foo/article.php
$this-&gt;extend('_global.html');
?&gt;

&lt;?php $this-&gt;block('title');?&gt;Article&lt;?php $this-&gt;endblock(); ?&gt;

&lt;?php $this-&gt;block('body');?&gt;
    &lt;article&gt;
        &lt;h2&gt;Article&lt;/h2&gt;
        &lt;p&gt;FOO&lt;/p&gt;
    &lt;/article&gt;
&lt;?php $this-&gt;endblock(); ?&gt;</code></pre>
<p>The result will be:</p>
<pre><code class="language-html">&lt;Doctype html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Article&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="container"&gt;
        &lt;article&gt;
            &lt;h2&gt;Article&lt;/h2&gt;
            &lt;p&gt;FOO&lt;/p&gt;
        &lt;/article&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
<h3>Show Parent</h3>
<p>We can echo parent data in a block:</p>
<pre><code class="language-html">&lt;?php $this-&gt;block('body');?&gt;
    &lt;?php echo $this-&gt;parent(); ?&gt;
    &lt;article&gt;
        &lt;h2&gt;Article&lt;/h2&gt;
        &lt;p&gt;FOO&lt;/p&gt;
    &lt;/article&gt;
&lt;?php $this-&gt;endblock(); ?&gt;</code></pre>
<p>Result:</p>
<pre><code class="language-html">&lt;h2&gt;Home page&lt;/h2&gt;
&lt;article&gt;
    &lt;h2&gt;Article&lt;/h2&gt;
    &lt;p&gt;FOO&lt;/p&gt;
&lt;/article&gt;</code></pre>
<p>See: <a href="https://github.com/ventoviro/windwalker-renderer#windwalker-renderer">Windwalker Renderer</a></p>
<h2>Blade &amp; Edge Engine</h2>
<p>Blade is a simple, yet powerful templating engine provided with <a href="http://laravel.com/">Laravel</a>. It is driven by template inheritance and sections.
All Blade templates should use the <code>.blade.php</code> extension.</p>
<p>There are 2 ways to use Blade engine in View, first is directly create it.</p>
<pre><code class="language-php">use Windwalker\Core\View\BladeHtmlView;

// Use Blade view
$view = $this-&gt;getView('sakura', 'html', 'edge');

$view['foo'] = $bar;

echo $view-&gt;setLayout('flower.sakura')-&gt;render();</code></pre>
<p>The second is extend it.</p>
<pre><code class="language-php">use Windwalker\Core\View\HtmlView;

class SakuraHtmlView extends HtmlView
{
    protected $renderer = 'edge'; // Or RendererHelper::EDGE
}

$view = $this-&gt;getView('sakura', 'html');

echo $view-&gt;setLayout('flower.sakura')-&gt;render();</code></pre>
<h3>Get Data in Edge Engine</h3>
<p>In Blade template we don't need to use <code>$data</code>, all properties are at top level:</p>
<pre><code class="language-php">{{ $item-&gt;title }}

{!! $uri['base.path'] !!}</code></pre>
<p>See <a href="edge.html">Edge Templates</a> <a href="hhttps://laravel.com/docs/5.2/blade">Blade Templates</a></p>
<h2>Twig Engine</h2>
<p>Twig is a well-known template language for PHP, created by Sensio. It uses a syntax similar to the Django and Jinja template languages.</p>
<p>There are 2 ways to use Twig engine, similar to Blade engine:</p>
<pre><code class="language-php">$view = $this-&gt;getView('sakura', 'html', 'twig');</code></pre>
<p>OR</p>
<pre><code class="language-php">use Windwalker\Core\View\HtmlView;

class SakuraHtmlView extends HtmlView
{
    protected $renderer = 'twig';
}

$view = $this-&gt;getView('sakura', 'html');</code></pre>
<h3>How to Use Twig</h3>
<p>See: <a href="http://twig.sensiolabs.org/documentation">Twig Documentation</a></p>
<h2>Global Variables</h2>
<p>There is some global variables will auto set into View template, you can easily use them:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>view</code></td>
<td>The view object self.</td>
</tr>
<tr>
<td><code>helper</code></td>
<td>the helper proxy object to help us quickly use other helper object.</td>
</tr>
<tr>
<td><code>uri</code></td>
<td>The uri registry object, see <a href="./uri-route-building.html">Uri &amp; Route Building</a></td>
</tr>
<tr>
<td><code>app</code></td>
<td>The global application object.</td>
</tr>
<tr>
<td><code>package</code></td>
<td>The current package pbject.</td>
</tr>
<tr>
<td><code>router</code></td>
<td>The router object of current package.</td>
</tr>
<tr>
<td><code>messages</code></td>
<td>The flash messages.</td>
</tr>
<tr>
<td><code>translator</code></td>
<td>The translator object.</td>
</tr>
<tr>
<td><code>datetime</code></td>
<td>The Datetime object of current time.</td>
</tr>
<tr>
<td><code>widget</code></td>
<td>Instance of WidgetHelper to quickly render widget.</td>
</tr>
<tr>
<td><code>asset</code></td>
<td>AssetManager object.</td>
</tr>
</tbody>
</table>
<h2>Use Json, Xml or Other Format View</h2>
<p>Sometimes we will hope a page can return multiple formats and control by HTTP query (<code>&amp;format=xxx</code>).
We can create multiple Views with different formats to return data.</p>
<p>For example, we create a HTML class.</p>
<pre><code class="language-php">// src/Flower/View/Sakura/SakuraHtmlView.php

namespace Flower\View\Sakura;

class SakurasHtmlView extends HtmlView
{
    /**
     * @param \Windwalker\Data\Data $data
     *
     * @return  void
     */
    protected function prepareData($data)
    {
        $data-&gt;items = $this-&gt;repository-&gt;getItems();
        $data-&gt;pagination = new Pagination($this-&gt;repository-&gt;get('page'));
        $data-&gt;title = 'Sakuras List';
        $data-&gt;metadata = 'Sakuras metadata';
    }
} </code></pre>
<p>And a Json view class.</p>
<pre><code class="language-php">namespace Asuka\Flower\View\Sakuras;

use Windwalker\Core\View\StructureView;

class SakurasJsonView extends StructureView
{
    /**
     * @param \Windwalker\Structure\Structure $structure
     *
     * @return  void
     */
    protected function prepareData($structure)
    {
        $page = $this-&gt;repository-&gt;get('page');

        $structure-&gt;set('items', $this-&gt;repository-&gt;getItems());
        $structure-&gt;set('next', $this-&gt;router-&gt;to('sakuras')-&gt;page($page));
    }
}</code></pre>
<p>You can notice that Html view and Json view prepared different data for their usage, then we must load them in controller:</p>
<pre><code class="language-php">class GetController extends AbstractController
{
    public function doExecute()
    {
        $format = $this-&gt;input-&gt;get('format', 'html');

        $view = $this-&gt;getView('Sakuras', $format);

        switch ($format)
        {
            case 'html':
                $this-&gt;response = new HtmlResponse();
                break;

            case 'json':
                $this-&gt;response = new JsonResponse();
                break;

            // More formats...
        }

        // Just return view object, application will auto convert it to string.
        return $view;
    }
}</code></pre>
<p>In the example, a page will use different format by URL <code>format=html|json</code> and the destination view returned different content for client.</p>
<p>You can create your <code>ResponseFactory::create($format)</code> and every thing will be automatically.</p>
<h2>Helpers</h2>
<h3>HTML Escape</h3>
<p>Use <code>echo html_escape($string)</code> to escape HTML in PHP. If you want to convert <code>\n</code> to <code>&lt;br&gt;</code>, add second argument as TRUE.</p>
<pre><code class="language-php">&lt;?php echo html_escape($string, true); ?&gt;</code></pre>
<h3>Edge HTML Attributes Binding</h3>
<p>Use <code>@attr()</code> to bind an attribute to variables:</p>
<pre><code class="language-html">&lt;input type="text" @attr('required', $isRequired) /&gt;</code></pre>
<p>The binding rule please see: <a href="https://github.com/ventoviro/windwalker-dom#attributes">https://github.com/ventoviro/windwalker-dom#attributes</a></p>
                        <hr />

    <p class="text-center inner-top-sm">
        If you found a typo or error, please help us <a target="_blank" href="https://github.com/ventoviro/ventoviro.github.io/tree/master/.vaseman/entries/documentation/3.x/mvc/view-templating.md">improve</a> this document.
    </p>
                </article>
            </div>
        </div>
    </section>
</div>

<section id="footer" class="black-block inner-md text-center">

    <div class="container inner-top-md inner-bottom-sm">

        <p>
            <a href="https://github.com/ventoviro/windwalker" class="btn" target="_blank">
                <i class="fa fa-github"></i>
                GitHub
            </a>

            <a href="http://natika.windwalker.io" class="btn" target="_blank">
                <i class="fa fa-comments"></i>
                Forum
            </a>

            <a href="http://windwalker.io/api-site/" class="btn" target="_blank">
                <i class="fa fa-code"></i>
                API
            </a>
        </p>

        <p class="outer-top-xs">
            <a href="#header" class="text-center footer-logo">
                <img class="img-invert" width="250" src="../../../asset/images/logo/windwalker-logo-250.png" alt="Logo" style="">
            </a>
        </p>

        <p class="lead outer-top-xs">
            Copyright © 2018 Windwalker. All Rights Reserved - <a target="_blank" href="https://the-allstars.com">Web Design</a>
        </p>
    </div>

</section>

<!-- Bootstrap core JavaScript
   ================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="../../../asset/js/jquery.min.js"></script>
<script src="../../../asset/js/jquery.smooth-scroll.min.js"></script>
<script src="../../../asset/js/bootstrap.min.js"></script>
<script src="../../../asset/js/material.min.js"></script>
<script src="../../../asset/js/ripples.min.js"></script>
<script src="../../../asset/js/prism.js"></script>
<script src="../../../asset/js/main.js"></script>

    <script src="../../../asset/js/doc.js"></script>

<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-48372917-6', 'auto');
    ga('send', 'pageview');

</script>

</body>
</html>

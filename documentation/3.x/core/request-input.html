<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="shortcut icon" href="../../../asset/images/favicon.ico" />

    <title>Request and Input | Windwalker - PHP Rapid Development Framework</title>

    <meta name="description" content="">
    <meta name="generator" content="The Time Machine">

    <meta property="og:title" content="Request and Input | Windwalker - PHP Rapid Development Framework">
    <meta property="og:site_name" content="Windwalker Framework">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-material-design/0.5.10/css/bootstrap-material-design.min.css" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400,500,700,900,300|Roboto+Condensed:400,700|Roboto+Slab:400,700,300" />
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" />
    <link rel="stylesheet" href="../../../asset/css/ripples.min.css" />
    <link rel="stylesheet" href="../../../asset/css/prism.min.css" />
    <link rel="stylesheet" href="../../../asset/css/main.css" />
        </head>
<body class="">

    <section id="header">

            <nav id="nav">

    <div class="navbar navbar-transparent">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-responsive-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="../../../">
                    <img class="img-invert" src="../../../asset/images/logo/windwalker-logo-150.png" alt="Logo" style="max-height: 100%">
                </a>
            </div>
            <div class="navbar-collapse collapse navbar-responsive-collapse">
                <ul class="mainmenu nav navbar-nav navbar-right">
                    <li class="">
                        <a href="../../../about/">
                            <i class="material-icons">change_history</i>
                            <span class="menu-item-title">About</span>
                        </a>
                    </li>

                    <li class="active">
                        <a href="../../../documentation/3.x/start/installation.html">
                            <i class="material-icons">description</i>
                            <span class="menu-item-title">Documentation</span>
                        </a>
                    </li>

                    <li class="">
                        <a href="../../../rad/start/introduction.html">
                            <i class="material-icons">graphic_eq</i>
                            <span class="menu-item-title">RAD</span>
                        </a>
                    </li>

                    <li class="">
                        <a href="https://github.com/ventoviro/windwalker" target="_blank">
                            <i class="fa fa-fw fa-github"></i>
                            <span class="menu-item-title">GitHub</span>
                        </a>
                    </li>

                    <li>
                                    <div class="btn-group" style="margin-left: 15px">
                <button type="button" class="btn btn-default btn-raised dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    3.x <i class="fa fa-caret-down"></i>
                </button>
                <ul class="dropdown-menu">
                    <li class="active">
                        <a href="../../../documentation/3.x/core/request-input.html">3.x</a>
                    </li>

                    <li class="">
                        <a href="../../../documentation/3.0-3.3/core/request-input.html">3.0-3.3</a>
                    </li>

                    <li class="">
                        <a href="../../../documentation/2.1/start/request-input.html">2.1</a>
                    </li>
                </ul>
            </div>
                            </li>
                </ul>
            </div>
        </div>
    </div>

</nav>

        <section id="banner" class="container text-center">
            <div class="row">
                <div class="banner-content col-md-10">
                    <h1 class="banner-title">Request and Input</h1>
                </div>
            </div>
        </section>

    </section>

<div id="main-body" class="main main-raised main-raised-bottom">
        <section id="main-body" class="container main-block">
        <div class="row">
            <div class="col-md-3">
                    <div class="uk-width-medium-1-4 uk-container-center">
        <ul class="nav nav-stacked side-menu side-bar">
    
                
        <li class="nav-header">
        <h3 class="slab-font">Start</h3>
    </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/start/installation.html">Installation</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/start/getting-started.html">Getting Started</a>
            </li>
        
           <li class="nav-header">
        <h3 class="slab-font">Core</h3>
    </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/core/routing.html">Routing</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/core/package-system.html">Packages</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/core/config.html">Config &amp; Setting</a>
            </li>
                    <li class="active">
                <a class="withripple" href="../../../documentation/3.x/core/request-input.html">Request and Input</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/core/psr7-middlewares.html">Psr7 and Middlewares</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/core/ioc-container.html">IoC Container</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/core/service-provider.html">Service Provider</a>
            </li>
        
           <li class="nav-header">
        <h3 class="slab-font">MVC</h3>
    </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/mvc/use-controller.html">Use Controller</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/mvc/class-resolvers.html">Class Resolvers</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/mvc/view-templating.html">View and Templating</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/mvc/edge.html">Edge Templates</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/mvc/model-database.html">Model and Database</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/mvc/view-model.html">ViewModel</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/mvc/uri-route-building.html">URI and Route Building</a>
            </li>
        
           <li class="nav-header">
        <h3 class="slab-font">Database</h3>
    </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/db/basic.html">Basic Usage</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/db/read-write.html">Read and Write</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/db/table-schema.html">Table and Schema</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/db/query-builder.html">Query Builder</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/db/active-record.html">ActiveRecord</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/db/datamapper.html">DataMapper</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/db/migration.html">Migration And Seeding</a>
            </li>
        
           <li class="nav-header">
        <h3 class="slab-font">Services</h3>
    </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/services/authentication.html">Authentication</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/services/authorisation.html">Authorisation</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/services/asset.html">Asset Manager</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/services/caching.html">Caching</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/services/datetime.html">Chronos (DateTime)</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/services/environment.html">Environment</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/services/events.html">Events</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/services/queue.html">Queue</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/services/languages.html">Languages</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/services/mailer.html">Mailer</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/services/session.html">Session</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/services/widget-renderer.html">Widget and Renderer</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/services/debugging.html">Debugging and Logging</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/services/error-handling.html">Error Handling</a>
            </li>
        
           <li class="nav-header">
        <h3 class="slab-font">Console</h3>
    </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/console/console-basic.html">Basic Usage</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/console/custom-commands.html">Custom Commands</a>
            </li>
        
           <li class="nav-header">
        <h3 class="slab-font">More</h3>
    </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/more/data-object.html">Data Object</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/more/http-stream.html">Http and Stream</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/more/cors.html">CORS Headers</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/more/structure.html">Structure Object</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/more/crypt.html">Crypt</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/more/form-builder.html">Form Builder</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/more/form-definition.html">Form Definition</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/more/filesystem.html">Filesystem</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/more/html-builder.html">HTML Builder</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/more/pagination.html">Pagination</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/more/string.html">String</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/more/tests.html">Tests</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/more/validation.html">Validation</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/more/utilities.html">Utilities</a>
            </li>
                    <li class="">
                <a class="withripple" href="../../../documentation/3.x/more/more-packages.html">More Packages</a>
            </li>
        
       </ul>
    </div>
            </div>

            <div class="col-md-9">
                <article class="article-content">
                    <h2>Get Input Object in Controller</h2>
<p>Last section we have learned how to make controller work, now it's time to see how the application receives HTTP request queries and respond.
In Windwalker you may access input queries using <code>Input</code> object. Below is how it works:</p>
<pre><code class="language-php">// src/Flower/Controller/Sakuras/GetController.php

class GetController extends AbstractController
{
    protected function doExecute()
    {
        $id = $this-&gt;input-&gt;get('id');
        $token = $this-&gt;input-&gt;get('token', 'default value');

        // Do some stuff
    }
}</code></pre>
<h3>Get Input at Anywhere</h3>
<pre><code class="language-php">// Use global Ioc class
$input = Ioc::getInput();

// OR use container object
$input = $container-&gt;get('input');

// In Controller
$this-&gt;input;</code></pre>
<h2>Web Input</h2>
<p>Input object is a container of web request data and superglobals.</p>
<pre><code class="language-php">use Windwalker\IO\Input;

$input = new Input;

// To get $_REQUEST['flower']
$input-&gt;get('flower', 'default');

// Set value
$input-&gt;set('flower', 'sakura');

// Get value from $_POST
$input-&gt;post-&gt;get('form_data');</code></pre>
<p>The second argument is default value if request params not exists</p>
<h3>Filter</h3>
<p>Input object use <a href="https://github.com/ventoviro/windwalker-filter">Windwalker Filter</a> package to clean request string,
get request data by Input object keeps us away from unsafe string injection.</p>
<p>The default filter type is <code>CMD</code>. We can use other filter type:</p>
<pre><code class="language-php">// mysite.com/?flower=&lt;p&gt;to be, or not to be.&lt;/p&gt;;

$input-&gt;get('flower'); // tobeornottobe (Default cmd filter)

$input-&gt;get('flower', 'default_value', InputFilter::STRING); // to be, or not to be

$input-&gt;getString('flower'); // to be, or not to be (Same as above, using magic method)

$input-&gt;getRaw('flower') // &lt;p&gt;to be, or not to be.&lt;/p&gt;</code></pre>
<p>More filter usage please see: <a href="https://github.com/ventoviro/windwalker-filter">Windwalker Filter</a></p>
<h3>Compact and Get Array</h3>
<p>Get data as an array.</p>
<pre><code class="language-php">// mysite.com/?flower[1]=sakura&amp;flower[2]=olive;

$input-&gt;getArray('flower'); // Array( [1] =&gt; sakura [2] =&gt; olive)

// Get array and filter every values
$input-&gt;getArray('flower', null, '.', 'int');</code></pre>
<p>Use <code>compact()</code> method</p>
<pre><code class="language-php">// mysite.com/?flower=sakura&amp;foo=bar&amp;king=Richard

// Get all request
$input-&gt;compact();

// To retrieve values you want
$array(
    'flower' =&gt; '',
    'king' =&gt; '',
);

$input-&gt;compact($array); // Array( [flower] =&gt; sakura [king] =&gt; Richard)

// Specify different filters for each of the inputs:
$array(
    'flower' =&gt; InputFilter::CMD,
    'king' =&gt; InputFilter::STRING,
);

// Use nested array to get more complicated hierarchies of values

$input-&gt;compact(array(
    'windwalker' =&gt; array(
        'title' =&gt; InputFilter::STRING,
        'quantity' =&gt; InputFilter::INTEGER,
        'state' =&gt; 'integer' // Same as above
    )
));</code></pre>
<h3>Get And Set Multi-Level</h3>
<p>If we want to get value of <code>foo[bar][baz]</code>, just use <code>get('foo.bar.baz')</code>:</p>
<pre><code class="language-php">$value = $input-&gt;get('foo.bar.baz', 'default', InputFilter::STRING);

$input-&gt;set('foo.bar.baz', $data);

// Use custom separator
$input-&gt;get('foo/bar/baz', 'default', 'string', '/');
$input-&gt;set('foo/bar/baz', $data, '/');</code></pre>
<h3>Get Value From Other Methods</h3>
<p>We can get other methods as a new input object.</p>
<pre><code class="language-php">$post = $input-&gt;post;

$value = $post-&gt;get('foo', 'bar');

// Other inputs
$get    = $input-&gt;get;
$put    = $input-&gt;put;
$delete = $input-&gt;delete;</code></pre>
<h2>Get SUPER GLOBALS</h2>
<pre><code class="language-php">$env     = $input-&gt;env;
$session = $input-&gt;session;
$cookie  = $input-&gt;cookie;
$server  = $input-&gt;server;

$server-&gt;get('REMOTE_ADDR'); // Same as $_SERVER['REMOTE_ADDR'];</code></pre>
<p>See: <a href="http://php.net/manual/en/language.variables.superglobals.php">SUPER GLOBALS</a></p>
<h3>Get method of current request:</h3>
<pre><code class="language-php">$method = $input-&gt;getMethod();</code></pre>
<h2>Json Input</h2>
<p>If you send a request with json body or <code>content-type: application/json</code>, you can use <code>$input-&gt;json</code> to
get <code>JsonInput</code> and parse json values.</p>
<h2>Files and Uploaded</h2>
<p>Windwalker Http package convert nested <code>$_FILES</code> variables to a set of <code>UploadedFileInterface</code> that we can easily move the uploaded files.</p>
<p>Suppose we have this HTML form.</p>
<pre><code class="language-html">&lt;form action="..." enctype="multipart/form-data" method="post"&gt;
    &lt;input type="file" name="flower[sakura]" /&gt;
    &lt;input type="file" name="flower[rose]" /&gt;
    &lt;input type="submit" value="submit" /&gt;
&lt;/form&gt;</code></pre>
<p>Then we get files in controller:</p>
<pre><code class="language-php">// controller::doExecute()

use Windwalker\Http\Helper\UploadedFileHelper;

/** @var  $file  UploadedFileInterface */
$file = $this-&gt;input-&gt;files-&gt;get('flower.sakura');

if ($file-&gt;getError())
{
    throw new \RuntimeException('Upload fail: ' . UploadedFileHelper::getUploadMessage($file-&gt;getError()), 500);
}

$dest = WINDWALKER_TEMP . '/uploaded/' . $file-&gt;getClientFilename();

try
{
    $file-&gt;moveTo($temp);
}
catch (\RuntimeException $e)
{
    // Handle move error.
}</code></pre>
<p>See <a href="https://github.com/ventoviro/windwalker-http">Windwalker Http</a></p>
                        <hr />

    <p class="text-center inner-top-sm">
        If you found a typo or error, please help us <a target="_blank" href="https://github.com/ventoviro/ventoviro.github.io/tree/master/.vaseman/entries/documentation/3.x/core/request-input.md">improve</a> this document.
    </p>
                </article>
            </div>
        </div>
    </section>
</div>

<section id="footer" class="black-block inner-md text-center">

    <div class="container inner-top-md inner-bottom-sm">

        <p>
            <a href="https://github.com/ventoviro/windwalker" class="btn" target="_blank">
                <i class="fa fa-github"></i>
                GitHub
            </a>

            <a href="http://natika.windwalker.io" class="btn" target="_blank">
                <i class="fa fa-comments"></i>
                Forum
            </a>

            <a href="http://windwalker.io/api-site/" class="btn" target="_blank">
                <i class="fa fa-code"></i>
                API
            </a>
        </p>

        <p class="outer-top-xs">
            <a href="#header" class="text-center footer-logo">
                <img class="img-invert" width="250" src="../../../asset/images/logo/windwalker-logo-250.png" alt="Logo" style="">
            </a>
        </p>

        <p class="lead outer-top-xs">
            Copyright © 2018 Windwalker. All Rights Reserved - <a target="_blank" href="https://the-allstars.com">Web Design</a>
        </p>
    </div>

</section>

<!-- Bootstrap core JavaScript
   ================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="../../../asset/js/jquery.min.js"></script>
<script src="../../../asset/js/jquery.smooth-scroll.min.js"></script>
<script src="../../../asset/js/bootstrap.min.js"></script>
<script src="../../../asset/js/material.min.js"></script>
<script src="../../../asset/js/ripples.min.js"></script>
<script src="../../../asset/js/prism.js"></script>
<script src="../../../asset/js/main.js"></script>

    <script src="../../../asset/js/doc.js"></script>

<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-48372917-6', 'auto');
    ga('send', 'pageview');

</script>

</body>
</html>
